# Скрипти документації ThingsBoard

Ця директорія містить утилітні скрипти для керування документацією ThingsBoard.

## Скрипт міграції

### migrate-to-learning.sh

Скрипт для міграції та синхронізації навчальних матеріалів між основною документацією ThingsBoard та навчальним репозиторієм.

#### Призначення та передумови

Цей скрипт було створено для вирішення кількох специфічних завдань у процесі роботи з документацією ThingsBoard:

1. **Розділення відповідальності**
   - Відокремлює навчальні матеріали від основної документації
   - Забезпечує незалежну розробку освітнього контенту
   - Дозволяє мати різні цикли релізів для документації та навчальних матеріалів

2. **Організація контенту**
   - Підтримує чітку структуру навчальних матеріалів
   - Запобігає змішуванню різних типів документації
   - Спрощує керування та оновлення освітнього контенту

3. **Робочий процес розробки**
   - Підтримує паралельну роботу над документацією та навчальними матеріалами
   - Забезпечує легку синхронізацію між репозиторіями
   - Зберігає історію змін через резервні копії

4. **Забезпечення якості**
   - Забезпечує послідовну структуру файлів
   - Підтримує коректність внутрішніх посилань
   - Запобігає випадковому перезапису файлів

#### Розміщення скрипта

Скрипт фізично знаходиться в директорії `/learning-thingsboard/scripts/`, а в директорії `/scripts/` створено символічне посилання для зворотної сумісності. Це дозволяє:
- Зберігати всі скрипти навчальних матеріалів в одному місці
- Підтримувати існуючі процеси, які можуть використовувати старий шлях
- Спростити оновлення та підтримку скрипта

#### Можливості

- Створює резервні копії перед будь-якими змінами
- Перевіряє та створює необхідну структуру директорій
- Синхронізує нові файли без перезапису існуючих
- Оновлює посилання в markdown файлах відповідно до нової структури
- Забезпечує кольоровий вивід логів

#### Передумови

- Unix-подібне середовище (Linux або macOS)
- Встановлений `rsync`
- Відповідні права доступу до файлів

#### Використання

```bash
./migrate-to-learning.sh
```

#### Структура директорій

Скрипт очікує наступну структуру директорій:

```
thingsboard.github.io/
├── docs/
│   └── learning/          # Вихідні навчальні матеріали
├── images/
│   └── learning/          # Вихідні зображення
├── learning-thingsboard/  # Цільовий навчальний репозиторій
│   ├── lessons/
│   ├── docs/
│   ├── assets/
│   └── scripts/          # Основне розміщення скрипта
└── scripts/
    └── migrate-to-learning.sh -> ../learning-thingsboard/scripts/migrate-to-learning.sh
```

#### Резервне копіювання

Перед будь-якими змінами скрипт створює резервну копію в:
```
thingsboard.github.io/backups/YYYYMMDD_HHMMSS/
```

#### Послідовність виконання

Скрипт виконується в наступному порядку:

1. **Ініціалізація**
   - Встановлення прапорця `set -e` для зупинки при помилках
   - Визначення шляхів до директорій
   - Налаштування кольорового виводу

2. **Створення резервної копії** (`create_backup`)
   - Створення директорії для бекапу з часовою міткою
   - Копіювання всього вмісту learning-thingsboard
   - Логування інформації про створений бекап

3. **Перевірка структури** (`check_structure`)
   - Перевірка існування основної директорії
   - Створення необхідних піддиректорій якщо відсутні:
     * lessons/
     * docs/
     * scripts/
   - Виведення попереджень про створені директорії

4. **Синхронізація файлів** (`sync_files`)
   - Копіювання нових уроків з docs/learning/
   - Копіювання нових зображень з images/learning/
   - Використання rsync для безпечного копіювання

5. **Оновлення посилань** (`update_links`)
   - Пошук всіх markdown файлів
   - Оновлення шляхів до уроків
   - Оновлення шляхів до зображень

Кожен етап супроводжується:
- Інформаційними повідомленнями про прогрес
- Перевірками на помилки
- Відповідним кольоровим маркуванням виводу

#### Обробка помилок

- Скрипт використовує `set -e` для зупинки при будь-якій помилці
- Забезпечує кольоровий вивід для різних типів повідомлень:
  - INFO: Звичайні повідомлення про прогрес
  - WARNING: Некритичні проблеми
  - ERROR: Критичні проблеми, що зупиняють виконання

#### Внесення змін

При модифікації скрипта:
1. Спочатку тестуйте зміни в безпечному середовищі
2. Підтримуйте функціональність резервного копіювання
3. Зберігайте послідовність логування
4. Оновлюйте цей README при додаванні нових функцій
