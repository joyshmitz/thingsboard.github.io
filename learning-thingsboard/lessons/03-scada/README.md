# SCADA можливості ThingsBoard

## Вступ

ThingsBoard надає потужний набір інструментів для створення SCADA-систем, включаючи:
- Динамічні мнемосхеми
- Анімовані елементи
- Інтерактивне керування
- Тренди реального часу
- Система тривог та подій

## Компоненти SCADA

### 1. Редактор мнемосхем

#### 1.1. Базові елементи
```yaml
Графічні примітиви:
  - Лінії та полілінії
  - Прямокутники та кола
  - Полігони
  - Текст та мітки

Промислові символи:
  - Насоси та двигуни
  - Клапани та засувки
  - Ємності та силоси
  - Конвеєри та транспортери

Динамічні елементи:
  - Індикатори стану
  - Рівнеміри
  - Термометри
  - Стрілочні прилади
```

#### 1.2. Приклад створення мнемосхеми силосу
```javascript
// Конфігурація віджета мнемосхеми
{
  "type": "image-map",
  "title": "Силос №1",
  "image": {
    "url": "/images/silo1.svg",
    "width": 800,
    "height": 1200
  },
  "markers": [
    {
      "position": {x: 400, y: 200},
      "type": "thermometer",
      "dataKey": "T1.1",
      "settings": {
        "min": 0,
        "max": 50,
        "units": "°C"
      }
    },
    {
      "position": {x: 400, y: 600},
      "type": "level",
      "dataKey": "level",
      "settings": {
        "min": 0,
        "max": 100,
        "units": "%"
      }
    },
    {
      "position": {x: 200, y: 800},
      "type": "fan",
      "dataKey": "fan_status",
      "settings": {
        "rotationSpeed": "{{fan_speed}}"
      }
    }
  ]
}
```

### 2. Анімація та інтерактивність

#### 2.1. Типи анімації
```yaml
Стандартні анімації:
  - Обертання (вентилятори, мішалки)
  - Заповнення (рівні в ємностях)
  - Зміна кольору (стани обладнання)
  - Мерехтіння (аварії)

Користувацькі анімації:
  - CSS анімації
  - SVG анімації
  - JavaScript анімації
```

#### 2.2. Приклад анімації конвеєра
```javascript
// Конфігурація анімованого конвеєра
{
  "type": "conveyor",
  "settings": {
    "animation": {
      "type": "moving-dots",
      "speed": "{{conveyor_speed}}",
      "direction": "left-to-right",
      "colors": {
        "running": "#00ff00",
        "stopped": "#ff0000",
        "error": "#ff8800"
      }
    },
    "controls": {
      "start": {
        "type": "rpc",
        "method": "start_conveyor",
        "params": {"speed": 100}
      },
      "stop": {
        "type": "rpc",
        "method": "stop_conveyor"
      }
    }
  }
}
```

### 3. Тренди та графіки

#### 3.1. Типи графіків
```yaml
Реального часу:
  - Лінійні графіки
  - Стовпчикові діаграми
  - Кругові діаграми
  - Теплові карти

Історичні:
  - Тренди з архіву
  - Порівняльні графіки
  - Агреговані дані
  - XY діаграми
```

#### 3.2. Приклад конфігурації тренду
```javascript
{
  "type": "timeseries",
  "title": "Температура в силосі",
  "datasources": [
    {
      "dataKey": "T1.1",
      "label": "Верхній рівень",
      "color": "#2196f3"
    },
    {
      "dataKey": "T2.1",
      "label": "Середній рівень",
      "color": "#4caf50"
    },
    {
      "dataKey": "T3.1",
      "label": "Нижній рівень",
      "color": "#ff9800"
    }
  ],
  "settings": {
    "stack": false,
    "fillGraph": false,
    "smoothLines": true,
    "showPoints": false,
    "showLegend": true,
    "showAxes": true
  }
}
```

### 4. Система тривог

#### 4.1. Конфігурація тривог
```yaml
Рівні тривог:
  Critical:
    - Колір: Червоний
    - Звук: Сирена
    - SMS та дзвінки
  
  Warning:
    - Колір: Жовтий
    - Звук: Биття
    - Email та Telegram
  
  Info:
    - Колір: Синій
    - Звук: Немає
    - Тільки в журналі
```

#### 4.2. Приклад налаштування тривоги
```javascript
{
  "type": "alarm",
  "name": "Перегрів силосу",
  "condition": "T1.1 > 35",
  "severity": "CRITICAL",
  "actions": [
    {
      "type": "sound",
      "file": "alarm.mp3",
      "repeat": true
    },
    {
      "type": "notification",
      "template": "Температура в силосі {{entityName}} досягла {{T1.1}}°C!",
      "targets": ["sms", "email", "telegram"]
    },
    {
      "type": "rpc",
      "method": "start_cooling",
      "params": {"speed": 100}
    }
  ]
}
```

### 5. Звіти та журнали

#### 5.1. Типи звітів
```yaml
Оперативні звіти:
  - Поточний стан обладнання
  - Активні тривоги
  - Значення параметрів

Змінні звіти:
  - Журнал подій
  - Статистика роботи
  - Простої обладнання

Аналітичні звіти:
  - Ефективність роботи
  - Споживання ресурсів
  - Прогнозування відмов
```

#### 5.2. Приклад конфігурації звіту
```javascript
{
  "type": "report",
  "name": "Добовий звіт по силосу",
  "schedule": "0 0 * * *",  // Щодня о 00:00
  "template": {
    "type": "pdf",
    "sections": [
      {
        "title": "Температурний режим",
        "widget": "temperature-chart",
        "timewindow": {
          "last": {
            "interval": 24,
            "intervalUnit": "HOURS"
          }
        }
      },
      {
        "title": "Статистика роботи вентиляції",
        "widget": "ventilation-stats",
        "aggregation": {
          "type": "AVG",
          "interval": "1h"
        }
      },
      {
        "title": "Журнал тривог",
        "widget": "alarm-table",
        "filter": {
          "severity": ["CRITICAL", "WARNING"]
        }
      }
    ]
  },
  "delivery": {
    "type": "email",
    "recipients": ["operator@grain.com", "manager@grain.com"],
    "subject": "Звіт по силосу {{entityName}} за {{date}}"
  }
}
```

## Приклади використання

### 1. Мнемосхема зернового терміналу
```yaml
Елементи:
  - Силоси з індикацією заповнення
  - Конвеєрні лінії з анімацією
  - Ваги з поточними показниками
  - Лабораторні дані по якості
  - Статуси всіх механізмів

Інтерактивність:
  - Керування маршрутами
  - Запуск/зупинка обладнання
  - Перегляд деталей по кліку
  - Квитування тривог
```

### 2. Моніторинг температурного режиму
```yaml
Компоненти:
  - 3D модель силосу
  - Теплова карта
  - Графіки трендів
  - Журнал подій
  - Панель керування вентиляцією

Функції:
  - Автоматичне керування
  - Ручне керування
  - Прогнозування трендів
  - Оптимізація режимів
```

### 3. Система контролю якості
```yaml
Елементи:
  - Лабораторні дані
  - Графіки параметрів
  - Статистика по партіях
  - Сертифікати якості
  - Звіти для клієнтів

Функції:
  - Введення результатів аналізів
  - Контроль відхилень
  - Формування документів
  - Експорт даних
```

## Кращі практики

### 1. Проектування мнемосхем
```yaml
Рекомендації:
  - Використовуйте єдиний стиль
  - Групуйте пов'язані елементи
  - Забезпечте чітку навігацію
  - Додайте легенду та підказки

Уникайте:
  - Перевантаження інформацією
  - Дрібних елементів
  - Неконтрастних кольорів
  - Складних анімацій
```

### 2. Налаштування тривог
```yaml
Правила:
  - Визначте чіткі пріоритети
  - Встановіть доцільні межі
  - Налаштуйте фільтрацію
  - Забезпечте квитування

Документування:
  - Опис кожної тривоги
  - Інструкції з реагування
  - Контакти відповідальних
  - Історія змін
```

### 3. Оптимізація продуктивності
```yaml
Рекомендації:
  - Використовуйте агрегацію даних
  - Налаштуйте кешування
  - Оптимізуйте запити
  - Архівуйте старі дані

Моніторинг:
  - Навантаження на сервер
  - Час відгуку
  - Використання пам'яті
  - Мережевий трафік
```
